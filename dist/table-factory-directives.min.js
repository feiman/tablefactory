angular.module("ngTableFactoryDirectives",["ngSanitize","ngTableFactory"]).directive("ngDataTableFactory",["TableFactory","TableFactoryUtility","TableFactoryHtml",function(n,t){function i(i,r,u,f){function o(){function u(){var n=angular.copy(e.getSelection());f.$setViewValue(n);t.safeApply(i)}function o(){if(!t.isNoU(f.$viewValue)){var n=[],i=[];t.isArrayNotEmpty(f.$viewValue.selected)&&(n=f.$viewValue.selected);t.isArrayNotEmpty(f.$viewValue.checked)&&(i=f.$viewValue.checked);e.setSelection(n,i)}}e=n.create($(r),i.options);e.eventRegister("row-clicked",function(){u()});e.eventRegister("clear-selection",function(){u()});e.eventRegister("rows-created",function(){o()});f.$render=o}var e=null;i.$watch(function(){return i.options},function(){t.isNoU(i.options)||(t.isNotNoU(e)&&e.destroy(),o())})}return{restrict:"EA",require:"ngModel",scope:{options:"=?"},template:"<div><\/div>",link:i}}]).directive("ngDropdownSelector",["TableFactory","TableFactoryUtility","TableFactoryHtml",function(n,t){function i(){return"<div class='dropdown'>   <div class='form-group dropdown-toggle' data-toggle='dropdown'>       <div class='input-group' style='cursor: pointer;'>           <div class='form-control' style='display: inline-table;'>               <span ng-repeat='item in selectedItems'>                   <label ng-hide='single === true' class='label' style='margin: 0 5px 0 0; cursor: pointer;' ng-click='labelClicked($event, item)'                       ng-class='{ \"label-danger\": isOver, \"label-primary\": !isOver }'                       ng-mouseover='isOver = true' ng-mouseout='isOver = false'>{{item[displayField]}}<\/label>                   <span ng-show='single === true'>{{item[displayField]}}<\/span>               <\/span>           <\/div>           <div class='input-group-addon'><span class='caret'><\/span><\/div>       <\/div>   <\/div>   <div class='dropdown-menu' style='padding: 0; width: 100%;'><\/div><\/div>"}function r(i,r,u,f){function h(){if(t.isArray(f.$viewValue)!==!1){var n=[];i.selectedItems=[];t.each(f.$viewValue,function(r){var u=t.find(i.items,function(n){return n[i.valueField]===r});t.isNotNoU(u)&&(n.push(r),i.selectedItems.push(u))});e.setSelection(n,n)}}function c(n){for(var r=[],t=0;t<i.selectedItems.length;t++)i.selectedItems[t][o.referenceField]!==n[o.referenceField]&&r.push(i.selectedItems[t]);i.selectedItems=r}var s=!1,l=$(r).find(".dropdown-menu"),o={referenceField:t.isNoUoE(i.valueField)?"id":i.valueField,layout:{showHeader:!1,showFooter:!1,showCheckAll:!1,height:"240px"},columns:[{field:t.isNoUoE(i.displayField)?"name":i.displayField}],selection:{canSelect:!0,canSelectMulti:i.single!==!0,canCheck:i.single!==!0,canCheckMulti:i.single!==!0,selectionsLinked:!0},data:{paged:!1,readerFn:function(n,r){t.isArrayNotEmpty(i.items)?r(i.items,i.items.length):r([],0)}}},e;t.isArrayNotEmpty(i.additionals)&&t.each(i.additionals,function(n){o.columns.push({field:n.field,width:t.isNoUoE(n.width)?"140px":n.width})});i.selectedItems=[];e=n.create(l,o);e.eventRegister("row-selected",function(n){i.single===!0?i.selectedItems=[n]:i.selectedItems.push(n);f.$setViewValue(t.extract(i.selectedItems,i.valueField));t.safeApply(i);i.single===!0&&$(r).find(".dropdown-toggle").dropdown("toggle")});i.single!==!0&&e.eventRegister("row-unselected",function(n){c(n);f.$setViewValue(t.extract(i.selectedItems,i.valueField));t.safeApply(i)});e.eventRegister("clear-selection",function(){i.selectedItems=[];f.$setViewValue([]);t.safeApply(i)});e.eventRegister("rows-created",function(){h()});i.labelClicked=function(n,r){n.stopPropagation();c(r);e.setRowSelection(r[o.referenceField],!1,!1);f.$setViewValue(t.extract(i.selectedItems,i.valueField))};i.$watchCollection("items",function(){s===!1?(s=!0,e.refreshData(!1)):e.refreshData(!0)});f.$render=h}return{restrict:"EA",require:"ngModel",scope:{items:"=",single:"=?",displayField:"@",valueField:"@",additionals:"=?"},template:i(),link:r}}]).directive("ngModalSelector",["TableFactory","TableFactoryUtility","TableFactoryHtml",function(n,t){function i(){return"<div class='modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div ng-show='title' class='modal-header'><div>{{title}}<\/div><\/div><div class='modal-body'><div class='table-container'><\/div><\/div><div class='modal-footer'><button class='btn btn-primary pull-left' ng-click='selectionClear()'><i class='glyphicon glyphicon-erase'><\/i><\/button><button class='btn btn-default' ng-click='modalCancel()'><i class='glyphicon glyphicon-remove'><\/i><\/button><button class='btn btn-primary' ng-click='modalConfirm()'><i class='glyphicon glyphicon-ok'><\/i><\/button><\/div><\/div><\/div><\/div>"}function r(i,r,u,f){function c(){if(!t.isNoU(f.$viewValue)){var n=f.$viewValue;t.isArrayNullOrEmpty(f.$viewValue)&&(n=[]);e.setSelection(n,n)}}var s=!1,l=$(r).find(".table-container"),h={referenceField:t.isNoUoE(i.valueField)?"id":i.valueField,layout:{showHeader:!1,showFooter:!1,showCheckAll:!1,height:"240px"},columns:[{field:t.isNoUoE(i.displayField)?"name":i.displayField}],selection:{canSelect:!0,canSelectMulti:i.single!==!0,canCheck:i.single!==!0,canCheckMulti:i.single!==!0,selectionsLinked:!0},data:{paged:!1,readerFn:function(n,r){t.isArrayNotEmpty(i.items)?r(i.items,i.items.length):r([],0)}}},e,o;t.isArrayNotEmpty(i.additionals)&&t.each(i.additionals,function(n){h.columns.push({field:n.field,width:t.isNoUoE(n.width)?"140px":n.width})});e=n.create(l,h);e.eventRegister("rows-created",function(){c()});i.$watchCollection("items",function(){s===!1?(s=!0,e.refreshData(!1)):e.refreshData(!0)});o=$(r).find(".modal");o.modal({backdrop:"static",keyboard:!1,show:!1});i.modalCancel=function(){i.show=!1};i.modalConfirm=function(){i.show=!1;var n=e.getSelection();f.$setViewValue(n.selected);e.clearSelection()};i.selectionClear=function(){e.clearSelection()};i.$watch(function(){return i.show},function(){i.show===!0?(c(),o.modal("show")):o.modal("hide")})}return{restrict:"EA",require:"ngModel",scope:{items:"=",show:"=",single:"=?",title:"=?",displayField:"@",valueField:"@",additionals:"=?"},template:i(),link:r}}])